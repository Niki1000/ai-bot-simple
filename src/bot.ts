import { Telegraf } from 'telegraf';
import dotenv from 'dotenv';

dotenv.config();

const bot = new Telegraf(process.env.TELEGRAM_BOT_TOKEN!);

// –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
bot.start((ctx) => {
  ctx.reply(
    '–ü—Ä–∏–≤–µ—Ç! üëã\n' +
    '–Ø - AI Dating Bot —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏!\n\n' +
    '–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n' +
    '/girls - –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ–≤—É—à–µ–∫\n' +
    '/help - –ü–æ–º–æ—â—å\n\n' +
    '–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å, –∏ —è –Ω–∞–π–¥—É —Ç–µ–±–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞!'
  );
});

// –ü–æ–º–æ—â—å
bot.help((ctx) => {
  ctx.reply(
    '–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º:\n\n' +
    '1. –ù–∞–∂–º–∏ /girls —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π\n' +
    '2. –í—ã–±–µ—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n' +
    '3. –ù–∞—á–Ω–∏ –æ–±—â–µ–Ω–∏–µ\n' +
    '4. –†–∞–∑–≤–∏–≤–∞–π –æ—Ç–Ω–æ—à–µ–Ω–∏—è\n\n' +
    '–í–æ–ø—Ä–æ—Å—ã/–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: @—Ç–≤–æ–π_–Ω–∏–∫'
  );
});

// –°–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
bot.command('girls', (ctx) => {
  const characters = [
    { name: '–ê–Ω–Ω–∞ üë©‚Äçüé®', age: 25, desc: '–•—É–¥–æ–∂–Ω–∏—Ü–∞, –ª—é–±–∏—Ç –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è' },
    { name: '–ú–∞—Ä–∏—è üë©‚Äçüíº', age: 28, desc: '–ë–∏–∑–Ω–µ—Å-–ª–µ–¥–∏, —É–≤–ª–µ–∫–∞–µ—Ç—Å—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏–µ–π' },
    { name: '–°–æ—Ñ–∏—è üë©‚Äçüî¨', age: 23, desc: '–°—Ç—É–¥–µ–Ω—Ç–∫–∞, —Ñ–∞–Ω–∞—Ç–µ–µ—Ç –æ—Ç –Ω–∞—É–∫–∏' }
  ];

  let response = 'üë© –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏:\n\n';
  
  characters.forEach((char, index) => {
    response += `${index + 1}. ${char.name} (${char.age})\n`;
    response += `   ${char.desc}\n`;
    response += `   /chat_${index + 1}\n\n`;
  });

  ctx.reply(response);
});

// –ü—Ä–æ—Å—Ç–æ–π —ç—Ö–æ-–±–æ—Ç –ø–æ–∫–∞ —á—Ç–æ
bot.on('text', (ctx) => {
  const userMessage = ctx.message.text;
  
  // –ü—Ä–æ—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã
  const responses = [
    "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –†–∞—Å—Å–∫–∞–∂–∏ –±–æ–ª—å—à–µ –æ —Å–µ–±–µ üòä",
    "–Ø —Å–ª—É—à–∞—é —Ç–µ–±—è –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ!",
    "–•–º, —Ö–æ—Ä–æ—à–∞—è –º—ã—Å–ª—å! –ê —á—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å –æ...",
    "–ü—Ä–æ–¥–æ–ª–∂–∞–π, –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Å —Ç–æ–±–æ–π —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å! üí¨"
  ];
  
  const randomResponse = responses[Math.floor(Math.random() * responses.length)];
  
  ctx.reply(randomResponse);
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
bot.catch((err: any) => {
  console.error('‚ùå –û—à–∏–±–∫–∞ –±–æ—Ç–∞:', err);
});

export { bot };